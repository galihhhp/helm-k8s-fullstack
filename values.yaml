namespace: "default"
environment: "development"

networkPolicy:
  enabled: false

frontend:
  enabled: true
  replicaCount: 2
  name: "frontend"
  serviceAccountName: "frontend"
  automountServiceAccountToken: false
  labels:
    app: "frontend"
    tier: "ui"
    app.kubernetes.io/name: "frontend"
    app.kubernetes.io/instance: "frontend"
    app.kubernetes.io/component: "frontend"
  image:
    name: "galihhhp/react-frontend"
    tag: "2.0.0"
    pullPolicy: "IfNotPresent"
    containerPort: 80
  service:
    type: ClusterIP
    port: 80
    targetPort: 80
  env:
    API_URL: "http://localhost:3000"
    FEATURE_EDIT_TASK: "true"
    FEATURE_DELETE_TASK: "true"
    VITE_APP_VERSION: "2.0.0"
    FEATURE_SHOW_TASKS: "true"
    FEATURE_SHOW_USERS: "false"
  healthCheck:
    enabled: true
    startupProbe:
      path: "/"
      initialDelaySeconds: 5
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 30
    livenessProbe:
      path: "/"
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    readinessProbe:
      path: "/"
      initialDelaySeconds: 10
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 3
  resources:
    requests:
      cpu: "100m"
      memory: "128Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"

backend:
  enabled: true
  replicaCount: 2
  name: "backend"
  serviceAccountName: "backend"
  automountServiceAccountToken: false
  labels:
    app: "backend"
    tier: "backend"
    app.kubernetes.io/name: "backend"
    app.kubernetes.io/instance: "backend"
    app.kubernetes.io/component: "backend"
  image:
    name: "galihhhp/task-services"
    tag: "2.0.0"
    pullPolicy: "IfNotPresent"
    containerPort: 3000
  service:
    type: ClusterIP
    port: 3000
    targetPort: 3000
  env:
    NODE_ENV: "production"
    DB_HOST: "fullstack-app-postgresql"
    DB_PORT: "5432"
    DB_NAME: "postgres"
    DB_USER: "postgres"
    DB_COLUMN_ID: "id"
    DB_COLUMN_TASK: "task"
    FEATURE_EDIT_TASK: "true"
    FEATURE_DELETE_TASK: "true"
    FEATURE_REDIS_CACHE: "false"
  secrets:
    - name: DB_PASSWORD
      secretName: fullstack-app-postgresql
      key: postgres-password
  healthCheck:
    enabled: true
    startupProbe:
      path: "/"
      initialDelaySeconds: 5
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 30
    livenessProbe:
      path: "/"
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    readinessProbe:
      path: "/"
      initialDelaySeconds: 10
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 3
  resources:
    requests:
      cpu: "100m"
      memory: "128Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"

postgresql:
  enabled: true
  image:
    registry: docker.io
    repository: bitnami/postgresql
    tag: "latest"
  auth:
    postgresPassword: ""
    username: "postgres"
    password: ""
    database: "postgres"
  primary:
    initdb:
      scripts:
        init.sql: |
          CREATE TABLE IF NOT EXISTS main_table (
              id SERIAL PRIMARY KEY,
              task VARCHAR(255) NOT NULL
          );
    persistence:
      enabled: true
      size: 10Gi
    resources:
      requests:
        cpu: "250m"
        memory: "256Mi"
      limits:
        cpu: "500m"
        memory: "512Mi"
